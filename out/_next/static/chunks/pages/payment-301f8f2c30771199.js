(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{66390:function(e,t,s){"use strict";s(67294);var n=s(99189),r=s(87454),a=s(85893),c=n.Z.Title;n.Z.Text;t.Z=function(e){var t=e.children;(0,r.a)().user;return(0,a.jsxs)("div",{className:"mb-8",style:{padding:"50px 153px"},children:[(0,a.jsx)(c,{level:2,className:"logo",children:"Sprint Zero"}),t]})}},63943:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return R}});var n=s(50029),r=s(87794),a=s.n(r),c=s(67294),i=s(9008),l=s(11163),o=s(99189),u=s(3302),m=s(40280),d=s(20423),x=s(71230),p=s(15746),f=s(79531),h=s(27049),j=s(32808),g=s(42101),v=s(25035),N=s(86664),y=s(9669),Z=s.n(y),b=s(8762),w=(s(65514),s(85893)),S=o.Z.Title,P=o.Z.Text,_=u.Z.Item,k=m.Z.Option,C={hidePostalCode:!0,iconStyle:"solid",style:{base:{iconColor:"#000",color:"#000",fontWeight:400,fontFamily:"Roboto, Open Sans, Segoe Ui, sans-serif",fontSize:"14px","::placeholder":{color:"#A6AE9D"}},invalid:{iconColor:"red",color:"red"}}},E=function(e){var t=e.selectedPlan,s=e.countries,r=e.ip,i=(0,l.useRouter)(),o=(0,c.useState)(""),y=o[0],E=o[1],T=(0,c.useState)(""),I=T[0],z=T[1],D=(0,c.useState)(""),B=D[0],J=D[1],L=(0,c.useState)(""),O=L[0],R=L[1],U=(0,c.useState)(""),q=U[0],M=U[1],A=(0,c.useState)(!1),F=A[0],X=A[1],$=(0,c.useState)(!1),K=($[0],$[1]),V=(0,c.useState)(!0),W=V[0],H=V[1],Q=(0,c.useState)(null),G=Q[0],Y=Q[1],ee=(0,c.useState)(null),te=ee[0],se=ee[1];console.log("selectedPlan",t),console.log("countries",s),console.log("ip",r),null===t&&i.push("/");var ne=(0,N.useStripe)(),re=(0,N.useElements)();(0,c.useEffect)((function(){var e=function(){var e=(0,n.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z().post("/api/create_customer",{ip:r});case 2:t=e.sent,se(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[r]);var ae=function(){var e=(0,n.Z)(a().mark((function e(s){var n,r,c,l,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(!0),n=function(){var e="Basic"===t?9.99:99.99;return Math.round(100*(e+ie()+Number.EPSILON))/100},!0!==/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(B)||!F||!O){e.next=28;break}return r={name:"".concat(y," ").concat(I),email:B,address:{country:O,postal_code:q}},e.next=6,ne.createPaymentMethod({type:"card",card:re.getElement(N.CardElement),billing_details:r});case 6:if(c=e.sent,l=c.error,o=c.paymentMethod,l){e.next=24;break}return e.prev=10,u=o.id,e.next=14,Z().post("/api/payment_intents",{amount:100*n(),id:u});case 14:e.sent.data.success&&((0,b.nx)(!0),d.ZP.loading({content:"Running Card",className:"custom-message"},5e4).then((function(){return d.ZP.success({content:"Card Accepted",className:"custom-message"})})),setTimeout((function(){i.push("/login")}),4e3),K(!0)),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),d.ZP.loading({content:"Running Card",className:"custom-message"},2.5).then((function(){return d.ZP.error({content:e.t0.message,className:"custom-message"})})),H(!1);case 22:e.next=26;break;case 24:d.ZP.loading({content:"Validating...",className:"custom-message"},2.5).then((function(){return d.ZP.error({content:l.message,className:"custom-message"})})),H(!1);case 26:e.next=30;break;case 28:d.ZP.loading({content:"Validating...",className:"custom-message"},2.5).then((function(){return d.ZP.error({content:"Details missing",className:"custom-message"})})),H(!1);case 30:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=(0,n.Z)(a().mark((function e(s){var n,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="Basic"===t?"price_1JsrIXIUry2flRTckRVmn2LJ":"price_1JsrIyIUry2flRTca7f6zJ8N",e.next=3,Z().post("/api/create_subscription",{customer:te.id,items:[{price:"price",quantity:1}]});case 3:return e.sent,e.next=6,Z().post("/api/upcoming_invoice",{customer:te.id,country:s,postal_code:q,subscription_items:[{price:n,quantity:1}],ip:r});case 6:200===(c=e.sent).status?Y(c.data):console.log(c.data.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e="Basic"===t?9.99:99.99,s=G.total_tax_amounts[0].tax_rate.percentage/100;return Math.round(100*(e*s+Number.EPSILON))/100};return t&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"mb-4",children:[(0,w.jsx)(S,{level:1,style:{fontWeight:"normal"},children:"Hand Over Those Deets"}),(0,w.jsx)(P,{className:"text-xl",children:"Please provide your information below so we can keep our internet service providers happy and continue to evolve this product"})]}),(0,w.jsxs)(u.Z,{onFinish:ae,children:[(0,w.jsxs)("div",{children:[(0,w.jsx)(P,{className:"text-gray-500 font-semibold",style:{fontSize:"16px"},children:"Contact Information"}),(0,w.jsxs)(x.Z,{gutter:[16,16],className:"mt-4",children:[(0,w.jsx)(p.Z,{xs:24,sm:24,lg:14,children:(0,w.jsx)(_,{label:(0,w.jsxs)(P,{className:"flex items-center justify-between text-sm",children:["Full Name ",(0,w.jsx)(v.Z,{className:"ml-2 mr-2"})]}),name:"fullName",rules:[{required:!0,message:"Please input your full name!"}],children:(0,w.jsxs)("div",{className:"flex",children:[(0,w.jsx)(f.Z,{placeholder:"First",onChange:function(e){return E(e.target.value)}}),(0,w.jsx)(f.Z,{className:"ml-2",placeholder:"Last",onChange:function(e){return z(e.target.value)}})]})})}),(0,w.jsx)(p.Z,{xs:24,sm:24,lg:10,children:(0,w.jsx)(_,{label:(0,w.jsxs)(P,{className:"flex items-center justify-between text-sm",children:["Email ",(0,w.jsx)(v.Z,{className:"ml-2 mr-2"})]}),name:"email",rules:[{required:!0,message:"Please input your email!"}],children:(0,w.jsx)(f.Z,{onChange:function(e){return J(e.target.value)}})})})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)(P,{className:"text-gray-500 font-semibold",style:{fontSize:"16px"},children:"Credit Card Details"}),(0,w.jsxs)(x.Z,{gutter:[16,16],className:"mt-4",children:[(0,w.jsx)(p.Z,{xs:24,sm:24,lg:10,children:(0,w.jsx)("div",{className:"py-2 px-3 bg-white border border-gray-300 rounded-sm",children:(0,w.jsx)(N.CardElement,{options:C})})}),(0,w.jsx)(p.Z,{xs:24,sm:24,lg:8,children:(0,w.jsx)(_,{label:(0,w.jsxs)(P,{className:"flex items-center justify-between text-sm",children:["ZIP/Postal Code"," ",(0,w.jsx)(v.Z,{className:"ml-2 mr-2"})]}),name:"zip",rules:[{required:!0,message:"Please input your zip/postal code"}],children:(0,w.jsx)(f.Z,{onChange:function(e){return M(e.target.value)}})})}),(0,w.jsx)(p.Z,{xs:24,sm:24,lg:6,children:(0,w.jsx)(_,{label:(0,w.jsxs)(P,{className:"flex items-center justify-between text-sm",children:[(0,w.jsx)("span",{className:"text-red-500 text-lg",children:"*"}),"Country"," ",(0,w.jsx)(v.Z,{className:"ml-2 mr-2"})]}),name:"country",children:(0,w.jsx)("div",{className:"flex",children:(0,w.jsx)(m.Z,{style:{width:"100%"},onChange:function(e){R(e),ce(e)},disabled:""===q,children:s.map((function(e,t){return(0,w.jsx)(k,{value:e.Iso2,children:e.name},t)}))})})})})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)(P,{className:"text-gray-500 font-semibold",style:{fontSize:"16px"},children:"Selected Plan"}),(0,w.jsxs)(p.Z,{className:"flex items-center justify-between",children:[(0,w.jsx)(P,{className:"text-xl",children:t}),(0,w.jsxs)(P,{className:"text-xl",children:["$","Basic"===t?9.99:99.99," USD"]})]}),(0,w.jsxs)(p.Z,{className:"flex items-center justify-between mt-4",children:[(0,w.jsxs)(P,{className:"text-xl",children:["Sales Tax @"," ",G?G.total_tax_amounts[0].tax_rate.percentage:"-","%"]}),(0,w.jsxs)(P,{className:"text-xl",children:["$",G?ie():"-"," ","USD"]})]}),(0,w.jsx)(h.Z,{className:"bg-gray-900"}),(0,w.jsxs)(p.Z,{className:"flex items-center justify-between mt-4",children:[(0,w.jsx)(P,{className:"text-xl font-semibold",children:"Total"}),(0,w.jsxs)(P,{className:"text-xl font-semibold",children:["$",G?function(){var e="Basic"===t?9.99:99.99;return Math.round(100*(e+ie()+Number.EPSILON))/100}():"Basic"===t?9.99:99.99," ","USD"]})]}),(0,w.jsxs)(p.Z,{className:"flex items-center justify-start mt-4 mb-8",children:[(0,w.jsx)(j.Z,{checked:F,onChange:function(){G&&(X(!F),H(!!F))}}),(0,w.jsxs)(P,{className:"ml-4",children:["I agree to the"," ",(0,w.jsx)("span",{className:"underline cursor-pointer",children:"Terms of Service"})," ","and ackowledge the"," ",(0,w.jsx)("span",{className:"underline cursor-pointer",children:"Privacy Policy"}),"."]})]}),(0,w.jsxs)(x.Z,{gutter:[16,16],children:[(0,w.jsx)(p.Z,{xs:24,lg:12,children:(0,w.jsx)(g.Z,{type:"primary",htmlType:"submit",block:!0,disabled:W,children:(0,w.jsx)("span",{className:"font-semibold",children:"Submit"})})}),(0,w.jsx)(p.Z,{xs:24,lg:12,children:(0,w.jsx)(g.Z,{danger:!0,type:"ghost",block:!0,onClick:function(){return i.push("/")},children:(0,w.jsx)("span",{className:"font-semibold",children:"Cancel"})})})]})]})]})]})},T=s(66390),I=s(54465),z=s(2804),D=(0,z.cn)({key:"planState",default:null}),B=(0,z.nZ)({key:"selectedPlanState",get:function(e){var t=(0,e.get)(D);return"basic"===t?"Basic":"professional"===t?"Professional":null}}),J=(0,I.J)("pk_test_51Ji035IUry2flRTc8XUkfCQqzwcBBHiMCDLPmhJNTpDovjA7LnKQTELrmqiw6gy9eaWs973iEEDMKmKxwdj9vt4s00lcvsFZ0i"),L=function(){var e=(0,n.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z().get("https://countriesnow.space/api/v0.1/countries/iso");case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,n.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z().get("https://geolocation-db.com/json/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,c.useState)(null),t=e[0],s=e[1],r=(0,c.useState)(null),l=r[0],o=r[1],u=(0,z.sJ)(B);return(0,c.useEffect)((function(){(0,n.Z)(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:return t=e.sent,e.next=5,O();case 5:n=e.sent,s(t),o(n.IPv4);case 8:case"end":return e.stop()}}),e)})))()}),[]),(0,w.jsxs)("div",{children:[(0,w.jsxs)(i.default,{children:[(0,w.jsx)("title",{children:"Payment | Sprint Zero"}),(0,w.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,w.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,w.jsx)(T.Z,{children:(0,w.jsx)(N.Elements,{stripe:J,children:t&&l&&(0,w.jsx)(E,{selectedPlan:u,countries:t,ip:l})})})]})}},85553:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment",function(){return s(63943)}])},24654:function(){}},function(e){e.O(0,[714,151,188,741,302,677,423,834,774,888,179],(function(){return t=85553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);